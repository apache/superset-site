"use strict";(self.webpackChunkdocs_v_2=self.webpackChunkdocs_v_2||[]).push([[4949],{15680:(e,a,t)=>{t.d(a,{xA:()=>d,yg:()=>u});var n=t(96540);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function o(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?o(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function i(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=n.createContext({}),p=function(e){var a=n.useContext(s),t=a;return e&&(t="function"==typeof e?e(a):l(l({},a),e)),t},d=function(e){var a=p(e.components);return n.createElement(s.Provider,{value:a},e.children)},g="mdxType",c={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},y=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),g=p(t),y=r,u=g["".concat(s,".").concat(y)]||g[y]||c[y]||o;return t?n.createElement(u,l(l({ref:a},d),{},{components:t})):n.createElement(u,l({ref:a},d))}));function u(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var o=t.length,l=new Array(o);l[0]=y;var i={};for(var s in a)hasOwnProperty.call(a,s)&&(i[s]=a[s]);i.originalType=e,i[g]="string"==typeof e?e:r,l[1]=i;for(var p=2;p<o;p++)l[p]=t[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,t)}y.displayName="MDXCreateElement"},52511:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>p,contentTitle:()=>i,default:()=>y,frontMatter:()=>l,metadata:()=>s,toc:()=>d});var n=t(58168),r=(t(96540),t(15680)),o=t(86025);const l={title:"Connecting to Databases",hide_title:!0,sidebar_position:1,version:1},i="Connecting to Databases",s={unversionedId:"configuration/databases",id:"configuration/databases",title:"Connecting to Databases",description:"Superset does not ship bundled with connectivity to databases. The main step in connecting",source:"@site/docs/configuration/databases.mdx",sourceDirName:"configuration",slug:"/configuration/databases",permalink:"/docs/configuration/databases",draft:!1,editUrl:"https://github.com/apache/superset/edit/master/docs/docs/configuration/databases.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Connecting to Databases",hide_title:!0,sidebar_position:1,version:1},sidebar:"CustomSidebar",previous:{title:"Configuring Superset",permalink:"/docs/configuration/configuring-superset"},next:{title:"Alerts and Reports",permalink:"/docs/configuration/alerts-reports"}},p={},d=[{value:"Installing Database Drivers",id:"installing-database-drivers",level:2},{value:"Supported Databases and Dependencies",id:"supported-databases-and-dependencies",level:3},{value:"Installing Drivers in Docker Images",id:"installing-drivers-in-docker-images",level:3},{value:"1. Determine the driver you need",id:"1-determine-the-driver-you-need",level:4},{value:"2. Install the driver in the container",id:"2-install-the-driver-in-the-container",level:4},{value:"3. Connect to MySQL",id:"3-connect-to-mysql",level:4},{value:"4. Troubleshooting",id:"4-troubleshooting",level:4},{value:"Database-specific Instructions",id:"database-specific-instructions",level:3},{value:"Ascend.io",id:"ascendio",level:4},{value:"Apache Doris",id:"apache-doris",level:4},{value:"AWS Athena",id:"aws-athena",level:4},{value:"PyAthenaJDBC",id:"pyathenajdbc",level:5},{value:"PyAthena",id:"pyathena",level:5},{value:"AWS DynamoDB",id:"aws-dynamodb",level:4},{value:"PyDynamoDB",id:"pydynamodb",level:5},{value:"AWS Redshift",id:"aws-redshift",level:4},{value:"psycopg2",id:"psycopg2",level:5},{value:"redshift_connector",id:"redshift_connector",level:5},{value:"Using IAM-based credentials with Redshift cluster:",id:"using-iam-based-credentials-with-redshift-cluster",level:6},{value:"Using IAM-based credentials with Redshift serverless:",id:"using-iam-based-credentials-with-redshift-serverless",level:6},{value:"ClickHouse",id:"clickhouse",level:4},{value:"CockroachDB",id:"cockroachdb",level:4},{value:"CrateDB",id:"cratedb",level:4},{value:"Databend",id:"databend",level:4},{value:"Databricks",id:"databricks",level:4},{value:"Older driver",id:"older-driver",level:5},{value:"Hive",id:"hive",level:4},{value:"ODBC",id:"odbc",level:4},{value:"Dremio",id:"dremio",level:4},{value:"Apache Drill",id:"apache-drill",level:4},{value:"SQLAlchemy",id:"sqlalchemy",level:5},{value:"JDBC",id:"jdbc",level:5},{value:"ODBC",id:"odbc-1",level:5},{value:"Apache Druid",id:"apache-druid",level:4},{value:"Customizing Druid Connection",id:"customizing-druid-connection",level:5},{value:"Aggregations",id:"aggregations",level:5},{value:"Post-Aggregations",id:"post-aggregations",level:5},{value:"Elasticsearch",id:"elasticsearch",level:4},{value:"Exasol",id:"exasol",level:4},{value:"Firebird",id:"firebird",level:4},{value:"Firebolt",id:"firebolt",level:4},{value:"Google BigQuery",id:"google-bigquery",level:4},{value:"Install BigQuery Driver",id:"install-bigquery-driver",level:5},{value:"Connecting to BigQuery",id:"connecting-to-bigquery",level:5},{value:"Google Sheets",id:"google-sheets",level:4},{value:"Hana",id:"hana",level:4},{value:"Apache Hive",id:"apache-hive",level:4},{value:"Hologres",id:"hologres",level:4},{value:"IBM DB2",id:"ibm-db2",level:4},{value:"Apache Impala",id:"apache-impala",level:4},{value:"Kusto",id:"kusto",level:4},{value:"Apache Kylin",id:"apache-kylin",level:4},{value:"MySQL",id:"mysql",level:4},{value:"IBM Netezza Performance Server",id:"ibm-netezza-performance-server",level:4},{value:"Ocient DB",id:"ocient-db",level:4},{value:"Install the Ocient Driver",id:"install-the-ocient-driver",level:5},{value:"Connecting to Ocient",id:"connecting-to-ocient",level:5},{value:"Oracle",id:"oracle",level:4},{value:"Apache Pinot",id:"apache-pinot",level:4},{value:"Postgres",id:"postgres",level:4},{value:"Presto",id:"presto",level:4},{value:"RisingWave",id:"risingwave",level:4},{value:"Rockset",id:"rockset",level:4},{value:"Snowflake",id:"snowflake",level:4},{value:"Install Snowflake Driver",id:"install-snowflake-driver",level:5},{value:"Apache Solr",id:"apache-solr",level:4},{value:"Apache Spark SQL",id:"apache-spark-sql",level:4},{value:"SQL Server",id:"sql-server",level:4},{value:"StarRocks",id:"starrocks",level:4},{value:"Teradata",id:"teradata",level:4},{value:"ODBC Driver",id:"odbc-driver",level:4},{value:"TimescaleDB",id:"timescaledb",level:4},{value:"Trino",id:"trino",level:4},{value:"Connection String",id:"connection-string",level:5},{value:"Authentications",id:"authentications",level:5},{value:"1. Basic Authentication",id:"1-basic-authentication",level:6},{value:"2. Kerberos Authentication",id:"2-kerberos-authentication",level:6},{value:"3. Certificate Authentication",id:"3-certificate-authentication",level:6},{value:"4. JWT Authentication",id:"4-jwt-authentication",level:6},{value:"5. Custom Authentication",id:"5-custom-authentication",level:6},{value:"Vertica",id:"vertica",level:4},{value:"YugabyteDB",id:"yugabytedb",level:4},{value:"Connecting through the UI",id:"connecting-through-the-ui",level:2},{value:"How to setup up preferred database options and images",id:"how-to-setup-up-preferred-database-options-and-images",level:5},{value:"Setting images",id:"setting-images",level:5},{value:"How to add new database engines to available endpoint",id:"how-to-add-new-database-engines-to-available-endpoint",level:5},{value:"Extra Database Settings",id:"extra-database-settings",level:3},{value:"Deeper SQLAlchemy Integration",id:"deeper-sqlalchemy-integration",level:5},{value:"Schemas",id:"schemas",level:5},{value:"External Password Store for SQLAlchemy Connections",id:"external-password-store-for-sqlalchemy-connections",level:5},{value:"SSL Access to Databases",id:"ssl-access-to-databases",level:5},{value:"Misc.",id:"misc",level:2},{value:"Querying across databases",id:"querying-across-databases",level:3},{value:"Considerations",id:"considerations",level:4},{value:"Enabling the meta database",id:"enabling-the-meta-database",level:4}],g={toc:d},c="wrapper";function y(e){let{components:a,...t}=e;return(0,r.yg)(c,(0,n.A)({},g,t,{components:a,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"connecting-to-databases"},"Connecting to Databases"),(0,r.yg)("p",null,"Superset does not ship bundled with connectivity to databases. The main step in connecting\nSuperset to a database is to ",(0,r.yg)("strong",{parentName:"p"},"install the proper database driver(s)"),"\nin your environment."),(0,r.yg)("admonition",{type:"note"},(0,r.yg)("p",{parentName:"admonition"},"You\u2019ll need to install the required packages for the database you want to use as your metadata database\nas well as the packages needed to connect to the databases you want to access through Superset.\nFor information about setting up Superset's metadata database, please refer to\n",(0,r.yg)("a",{parentName:"p",href:"/docs/installation/"},"installation documentation"))),(0,r.yg)("p",null,"This documentation tries to keep pointer to the different drivers for commonly used database\nengine."),(0,r.yg)("h2",{id:"installing-database-drivers"},"Installing Database Drivers"),(0,r.yg)("p",null,"Superset requires a Python ",(0,r.yg)("a",{parentName:"p",href:"https://peps.python.org/pep-0249/"},"DB-API database driver"),"\nand a ",(0,r.yg)("a",{parentName:"p",href:"https://docs.sqlalchemy.org/en/20/dialects/"},"SQLAlchemy dialect")," to be installed for\neach database engine you want to connect to."),(0,r.yg)("p",null,"You can read more ",(0,r.yg)("a",{parentName:"p",href:"/docs/configuration/databases#docker-add-drivers"},"here")," about how to\ninstall new database drivers into your Superset configuration."),(0,r.yg)("h3",{id:"supported-databases-and-dependencies"},"Supported Databases and Dependencies"),(0,r.yg)("p",null,"Some of the recommended packages are shown below. Please refer to\n",(0,r.yg)("a",{parentName:"p",href:"https://github.com/apache/superset/blob/master/pyproject.toml"},"pyproject.toml")," for the versions that\nare compatible with Superset."),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},(0,r.yg)("div",{style:{width:"150px"}},"Database")),(0,r.yg)("th",{parentName:"tr",align:null},"PyPI package"),(0,r.yg)("th",{parentName:"tr",align:null},"Connection String"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#aws-athena"},"AWS Athena")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install pyathena[pandas]")," , ",(0,r.yg)("inlineCode",{parentName:"td"},"pip install PyAthenaJDBC")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"awsathena+rest://{access_key_id}:{access_key}@athena.{region}.amazonaws.com/{schema}?s3_staging_dir={s3_staging_dir}&... "))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#aws-dynamodb"},"AWS DynamoDB")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install pydynamodb")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"dynamodb://{access_key_id}:{secret_access_key}@dynamodb.{region_name}.amazonaws.com?connector=superset"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#aws-redshift"},"AWS Redshift")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install sqlalchemy-redshift")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"}," redshift+psycopg2://<userName>:<DBPassword>@<AWS End Point>:5439/<Database Name>"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#apache-doris"},"Apache Doris")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install pydoris")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"doris://<User>:<Password>@<Host>:<Port>/<Catalog>.<Database>"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#apache-drill"},"Apache Drill")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install sqlalchemy-drill")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"drill+sadrill:// For JDBC drill+jdbc://"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#apache-druid"},"Apache Druid")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install pydruid")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"druid://<User>:<password>@<Host>:<Port-default-9088>/druid/v2/sql"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#hive"},"Apache Hive")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install pyhive")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"hive://hive@{hostname}:{port}/{database}"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#apache-impala"},"Apache Impala")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install impyla")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"impala://{hostname}:{port}/{database}"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#apache-kylin"},"Apache Kylin")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install kylinpy")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"kylin://<username>:<password>@<hostname>:<port>/<project>?<param1>=<value1>&<param2>=<value2>"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#apache-pinot"},"Apache Pinot")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install pinotdb")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pinot://BROKER:5436/query?server=http://CONTROLLER:5983/"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#apache-solr"},"Apache Solr")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install sqlalchemy-solr")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"solr://{username}:{password}@{hostname}:{port}/{server_path}/{collection}"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#apache-spark-sql"},"Apache Spark SQL")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install pyhive")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"hive://hive@{hostname}:{port}/{database}"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#ascendio"},"Ascend.io")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install impyla")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"ascend://{username}:{password}@{hostname}:{port}/{database}?auth_mechanism=PLAIN;use_ssl=true"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#sql-server"},"Azure MS SQL")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install pymssql")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"mssql+pymssql://UserName@presetSQL:TestPassword@presetSQL.database.windows.net:1433/TestSchema"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#clickhouse"},"ClickHouse")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install clickhouse-connect")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"clickhousedb://{username}:{password}@{hostname}:{port}/{database}"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#cockroachdb"},"CockroachDB")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install cockroachdb")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"cockroachdb://root@{hostname}:{port}/{database}?sslmode=disable"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#dremio"},"Dremio")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install sqlalchemy_dremio")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"dremio://user:pwd@host:31010/"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#elasticsearch"},"Elasticsearch")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install elasticsearch-dbapi")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"elasticsearch+http://{user}:{password}@{host}:9200/"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#exasol"},"Exasol")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install sqlalchemy-exasol")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"exa+pyodbc://{username}:{password}@{hostname}:{port}/my_schema?CONNECTIONLCALL=en_US.UTF-8&driver=EXAODBC"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#google-bigquery"},"Google BigQuery")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install sqlalchemy-bigquery")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"bigquery://{project_id}"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#google-sheets"},"Google Sheets")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install shillelagh[gsheetsapi]")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"gsheets://"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#firebolt"},"Firebolt")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install firebolt-sqlalchemy")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"firebolt://{client_id}:{client_secret}@{database}/{engine_name}?account_name={name}"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#hologres"},"Hologres")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install psycopg2")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"postgresql+psycopg2://<UserName>:<DBPassword>@<Database Host>/<Database Name>"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#ibm-db2"},"IBM Db2")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install ibm_db_sa")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"db2+ibm_db://"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#netezza"},"IBM Netezza Performance Server")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install nzalchemy")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"netezza+nzpy://<UserName>:<DBPassword>@<Database Host>/<Database Name>"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#mysql"},"MySQL")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install mysqlclient")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"mysql://<UserName>:<DBPassword>@<Database Host>/<Database Name>"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#oracle"},"Oracle")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install cx_Oracle")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"oracle://"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#postgres"},"PostgreSQL")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install psycopg2")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"postgresql://<UserName>:<DBPassword>@<Database Host>/<Database Name>"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#presto"},"Presto")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install pyhive")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"presto://"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#rockset"},"Rockset")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install rockset-sqlalchemy")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"rockset://<api_key>:@<api_server>"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#hana"},"SAP Hana")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install hdbcli sqlalchemy-hana")," or ",(0,r.yg)("inlineCode",{parentName:"td"},"pip install apache-superset[hana]")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"hana://{username}:{password}@{host}:{port}"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#starrocks"},"StarRocks")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install starrocks")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"starrocks://<User>:<Password>@<Host>:<Port>/<Catalog>.<Database>"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#snowflake"},"Snowflake")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install snowflake-sqlalchemy")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"snowflake://{user}:{password}@{account}.{region}/{database}?role={role}&warehouse={warehouse}"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"SQLite"),(0,r.yg)("td",{parentName:"tr",align:null},"No additional library needed"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"sqlite://path/to/file.db?check_same_thread=false"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#sql-server"},"SQL Server")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install pymssql")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"mssql+pymssql://"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#teradata"},"Teradata")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install teradatasqlalchemy")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"teradatasql://{user}:{password}@{host}"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#timescaledb"},"TimescaleDB")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install psycopg2")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"postgresql://<UserName>:<DBPassword>@<Database Host>:<Port>/<Database Name>"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#trino"},"Trino")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install trino")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"trino://{username}:{password}@{hostname}:{port}/{catalog}"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#vertica"},"Vertica")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install sqlalchemy-vertica-python")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"vertica+vertica_python://<UserName>:<DBPassword>@<Database Host>/<Database Name>"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/configuration/databases#yugabytedb"},"YugabyteDB")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pip install psycopg2")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"postgresql://<UserName>:<DBPassword>@<Database Host>/<Database Name>"))))),(0,r.yg)("hr",null),(0,r.yg)("p",null,'Note that many other databases are supported, the main criteria being the existence of a functional\nSQLAlchemy dialect and Python driver. Searching for the keyword "sqlalchemy + (database name)"\nshould help get you to the right place.'),(0,r.yg)("p",null,"If your database or data engine isn't on the list but a SQL interface\nexists, please file an issue on the\n",(0,r.yg)("a",{parentName:"p",href:"https://github.com/apache/superset/issues"},"Superset GitHub repo"),", so we can work on documenting and\nsupporting it."),(0,r.yg)("p",null,"If you'd like to build a database connector for Superset integration,\nread the ",(0,r.yg)("a",{parentName:"p",href:"https://preset.io/blog/building-database-connector/"},"following tutorial"),"."),(0,r.yg)("h3",{id:"installing-drivers-in-docker-images"},"Installing Drivers in Docker Images"),(0,r.yg)("p",null,"Superset requires a Python database driver to be installed for each additional\ntype of database you want to connect to."),(0,r.yg)("p",null,"In this example, we'll walk through how to install the MySQL connector library.\nThe connector library installation process is the same for all additional libraries."),(0,r.yg)("h4",{id:"1-determine-the-driver-you-need"},"1. Determine the driver you need"),(0,r.yg)("p",null,"Consult the ",(0,r.yg)("a",{parentName:"p",href:"/docs/configuration/databases"},"list of database drivers"),"\nand find the PyPI package needed to connect to your database. In this example, we're connecting\nto a MySQL database, so we'll need the ",(0,r.yg)("inlineCode",{parentName:"p"},"mysqlclient")," connector library."),(0,r.yg)("h4",{id:"2-install-the-driver-in-the-container"},"2. Install the driver in the container"),(0,r.yg)("p",null,"We need to get the ",(0,r.yg)("inlineCode",{parentName:"p"},"mysqlclient")," library installed into the Superset docker container\n(it doesn't matter if it's installed on the host machine). We could enter the running\ncontainer with ",(0,r.yg)("inlineCode",{parentName:"p"},"docker exec -it <container_name> bash")," and run ",(0,r.yg)("inlineCode",{parentName:"p"},"pip install mysqlclient"),"\nthere, but that wouldn't persist permanently."),(0,r.yg)("p",null,"To address this, the Superset ",(0,r.yg)("inlineCode",{parentName:"p"},"docker compose")," deployment uses the convention\nof a ",(0,r.yg)("inlineCode",{parentName:"p"},"requirements-local.txt")," file. All packages listed in this file will be installed\ninto the container from PyPI at runtime. This file will be ignored by Git for\nthe purposes of local development."),(0,r.yg)("p",null,"Create the file ",(0,r.yg)("inlineCode",{parentName:"p"},"requirements-local.txt")," in a subdirectory called ",(0,r.yg)("inlineCode",{parentName:"p"},"docker")," that\nexists in the directory with your ",(0,r.yg)("inlineCode",{parentName:"p"},"docker-compose.yml")," or ",(0,r.yg)("inlineCode",{parentName:"p"},"docker-compose-non-dev.yml")," file."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"# Run from the repo root:\ntouch ./docker/requirements-local.txt\n")),(0,r.yg)("p",null,"Add the driver identified in step above.  You can use a text editor or do\nit from the command line like:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},'echo "mysqlclient" >> ./docker/requirements-local.txt\n')),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"If you are running a stock (non-customized) Superset image"),", you are done.\nLaunch Superset with ",(0,r.yg)("inlineCode",{parentName:"p"},"docker compose -f docker-compose-non-dev.yml up")," and\nthe driver should be present."),(0,r.yg)("p",null,"You can check its presence by entering the running container with\n",(0,r.yg)("inlineCode",{parentName:"p"},"docker exec -it <container_name> bash")," and running ",(0,r.yg)("inlineCode",{parentName:"p"},"pip freeze"),".  The PyPI package should\nbe present in the printed list."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"If you're running a customized docker image"),", rebuild your local image with the new\ndriver baked in:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"docker compose build --force-rm\n")),(0,r.yg)("p",null,"After the rebuild of the Docker images is complete, relaunch Superset by\nrunning ",(0,r.yg)("inlineCode",{parentName:"p"},"docker compose up"),"."),(0,r.yg)("h4",{id:"3-connect-to-mysql"},"3. Connect to MySQL"),(0,r.yg)("p",null,"Now that you've got a MySQL driver installed in your container, you should be able to connect\nto your database via the Superset web UI."),(0,r.yg)("p",null,"As an admin user, go to Settings -> Data: Database Connections and click the +DATABASE button.\nFrom there, follow the steps on the\n",(0,r.yg)("a",{parentName:"p",href:"/docs/configuration/databases#db-connection-ui"},"Using Database Connection UI page"),"."),(0,r.yg)("p",null,"Consult the page for your specific database type in the Superset documentation to determine\nthe connection string and any other parameters you need to input.  For instance,\non the ",(0,r.yg)("a",{parentName:"p",href:"/docs/configuration/databases#mysql"},"MySQL page"),", we see that the connection string\nto a local MySQL database differs depending on whether the setup is running on Linux or Mac."),(0,r.yg)("p",null,'Click the \u201cTest Connection\u201d button, which should result in a popup message saying,\n"Connection looks good!".'),(0,r.yg)("h4",{id:"4-troubleshooting"},"4. Troubleshooting"),(0,r.yg)("p",null,"If the test fails, review your docker logs for error messages.  Superset uses SQLAlchemy\nto connect to databases; to troubleshoot the connection string for your database, you might\nstart Python in the Superset application container or host environment and try to connect\ndirectly to the desired database and fetch data. This eliminates Superset for the\npurposes of isolating the problem."),(0,r.yg)("p",null,"Repeat this process for each different type of database you want Superset to be able to connect to."),(0,r.yg)("h3",{id:"database-specific-instructions"},"Database-specific Instructions"),(0,r.yg)("h4",{id:"ascendio"},"Ascend.io"),(0,r.yg)("p",null,"The recommended connector library to Ascend.io is ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/cloudera/impyla"},"impyla"),"."),(0,r.yg)("p",null,"The expected connection string is formatted as follows:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"ascend://{username}:{password}@{hostname}:{port}/{database}?auth_mechanism=PLAIN;use_ssl=true\n")),(0,r.yg)("h4",{id:"apache-doris"},"Apache Doris"),(0,r.yg)("p",null,"The ",(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/pydoris/"},"sqlalchemy-doris")," library is the recommended way to connect to Apache Doris through SQLAlchemy."),(0,r.yg)("p",null,"You'll need the following setting values to form the connection string:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"User"),": User Name"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Password"),": Password"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Host"),": Doris FE Host"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Port"),": Doris FE port"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Catalog"),": Catalog Name"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Database"),": Database Name")),(0,r.yg)("p",null,"Here's what the connection string looks like:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"doris://<User>:<Password>@<Host>:<Port>/<Catalog>.<Database>\n")),(0,r.yg)("h4",{id:"aws-athena"},"AWS Athena"),(0,r.yg)("h5",{id:"pyathenajdbc"},"PyAthenaJDBC"),(0,r.yg)("p",null,(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/PyAthenaJDBC/"},"PyAthenaJDBC")," is a Python DB 2.0 compliant wrapper for the\n",(0,r.yg)("a",{parentName:"p",href:"https://docs.aws.amazon.com/athena/latest/ug/connect-with-jdbc.html"},"Amazon Athena JDBC driver"),"."),(0,r.yg)("p",null,"The connection string for Amazon Athena is as follows:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"awsathena+jdbc://{aws_access_key_id}:{aws_secret_access_key}@athena.{region_name}.amazonaws.com/{schema_name}?s3_staging_dir={s3_staging_dir}&...\n")),(0,r.yg)("p",null,"Note that you'll need to escape & encode when forming the connection string like so:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"s3://... -> s3%3A//...\n")),(0,r.yg)("h5",{id:"pyathena"},"PyAthena"),(0,r.yg)("p",null,"You can also use the ",(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/PyAthena/"},"PyAthena library")," (no Java required) with the\nfollowing connection string:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"awsathena+rest://{aws_access_key_id}:{aws_secret_access_key}@athena.{region_name}.amazonaws.com/{schema_name}?s3_staging_dir={s3_staging_dir}&...\n")),(0,r.yg)("p",null,"The PyAthena library also allows to assume a specific IAM role which you can define by adding following parameters in Superset's Athena database connection UI under ADVANCED --\x3e Other --\x3e ENGINE PARAMETERS."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "connect_args": {\n        "role_arn": "<role arn>"\n    }\n}\n')),(0,r.yg)("h4",{id:"aws-dynamodb"},"AWS DynamoDB"),(0,r.yg)("h5",{id:"pydynamodb"},"PyDynamoDB"),(0,r.yg)("p",null,(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/PyDynamoDB/"},"PyDynamoDB")," is a Python DB API 2.0 (PEP 249) client for Amazon DynamoDB."),(0,r.yg)("p",null,"The connection string for Amazon DynamoDB is as follows:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"dynamodb://{aws_access_key_id}:{aws_secret_access_key}@dynamodb.{region_name}.amazonaws.com:443?connector=superset\n")),(0,r.yg)("p",null,"To get more documentation, please visit: ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/passren/PyDynamoDB/wiki/5.-Superset"},"PyDynamoDB WIKI"),"."),(0,r.yg)("h4",{id:"aws-redshift"},"AWS Redshift"),(0,r.yg)("p",null,"The ",(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/sqlalchemy-redshift/"},"sqlalchemy-redshift")," library is the recommended\nway to connect to Redshift through SQLAlchemy."),(0,r.yg)("p",null,"This dialect requires either ",(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/redshift-connector/"},"redshift_connector")," or ",(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/psycopg2/"},"psycopg2")," to work properly."),(0,r.yg)("p",null,"You'll need to set the following values to form the connection string:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"User Name"),": userName"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Password"),": DBPassword"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Database Host"),": AWS Endpoint"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Database Name"),": Database Name"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Port"),": default 5439")),(0,r.yg)("h5",{id:"psycopg2"},"psycopg2"),(0,r.yg)("p",null,"Here's what the SQLALCHEMY URI looks like:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"redshift+psycopg2://<userName>:<DBPassword>@<AWS End Point>:5439/<Database Name>\n")),(0,r.yg)("h5",{id:"redshift_connector"},"redshift_connector"),(0,r.yg)("p",null,"Here's what the SQLALCHEMY URI looks like:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"redshift+redshift_connector://<userName>:<DBPassword>@<AWS End Point>:5439/<Database Name>\n")),(0,r.yg)("h6",{id:"using-iam-based-credentials-with-redshift-cluster"},"Using IAM-based credentials with Redshift cluster:"),(0,r.yg)("p",null,(0,r.yg)("a",{parentName:"p",href:"https://docs.aws.amazon.com/redshift/latest/mgmt/working-with-clusters.html"},"Amazon redshift cluster")," also supports generating temporary IAM-based database user credentials."),(0,r.yg)("p",null,"Your superset app's ",(0,r.yg)("a",{parentName:"p",href:"https://docs.aws.amazon.com/redshift/latest/mgmt/generating-iam-credentials-role-permissions.html"},"IAM role should have permissions")," to call the ",(0,r.yg)("inlineCode",{parentName:"p"},"redshift:GetClusterCredentials")," operation."),(0,r.yg)("p",null,"You have to define the following arguments in Superset's redshift database connection UI under ADVANCED --\x3e Others --\x3e ENGINE PARAMETERS."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},'{"connect_args":{"iam":true,"database":"<database>","cluster_identifier":"<cluster_identifier>","db_user":"<db_user>"}}\n')),(0,r.yg)("p",null,"and SQLALCHEMY URI should be set to ",(0,r.yg)("inlineCode",{parentName:"p"},"redshift+redshift_connector://")),(0,r.yg)("h6",{id:"using-iam-based-credentials-with-redshift-serverless"},"Using IAM-based credentials with Redshift serverless:"),(0,r.yg)("p",null,(0,r.yg)("a",{parentName:"p",href:"https://docs.aws.amazon.com/redshift/latest/mgmt/serverless-whatis.html"},"Redshift serverless")," supports connection using IAM roles."),(0,r.yg)("p",null,"Your superset app's IAM role should have ",(0,r.yg)("inlineCode",{parentName:"p"},"redshift-serverless:GetCredentials")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"redshift-serverless:GetWorkgroup")," permissions on Redshift serverless workgroup."),(0,r.yg)("p",null,"You have to define the following arguments in Superset's redshift database connection UI under ADVANCED --\x3e Others --\x3e ENGINE PARAMETERS."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},'{"connect_args":{"iam":true,"is_serverless":true,"serverless_acct_id":"<aws account number>","serverless_work_group":"<redshift work group>","database":"<database>","user":"IAMR:<superset iam role name>"}}\n')),(0,r.yg)("h4",{id:"clickhouse"},"ClickHouse"),(0,r.yg)("p",null,"To use ClickHouse with Superset, you will need to install the ",(0,r.yg)("inlineCode",{parentName:"p"},"clickhouse-connect")," Python library:"),(0,r.yg)("p",null,"If running Superset using Docker Compose, add the following to your ",(0,r.yg)("inlineCode",{parentName:"p"},"./docker/requirements-local.txt")," file:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"clickhouse-connect>=0.6.8\n")),(0,r.yg)("p",null,"The recommended connector library for ClickHouse is\n",(0,r.yg)("a",{parentName:"p",href:"https://github.com/ClickHouse/clickhouse-connect"},"clickhouse-connect"),"."),(0,r.yg)("p",null,"The expected connection string is formatted as follows:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"clickhousedb://<user>:<password>@<host>:<port>/<database>[?options\u2026]clickhouse://{username}:{password}@{hostname}:{port}/{database}\n")),(0,r.yg)("p",null,"Here's a concrete example of a real connection string:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"clickhousedb://demo:demo@github.demo.trial.altinity.cloud/default?secure=true\n")),(0,r.yg)("p",null,"If you're using Clickhouse locally on your computer, you can get away with using a http protocol URL that\nuses the default user without a password (and doesn't encrypt the connection):"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"clickhousedb://localhost/default\n")),(0,r.yg)("h4",{id:"cockroachdb"},"CockroachDB"),(0,r.yg)("p",null,"The recommended connector library for CockroachDB is\n",(0,r.yg)("a",{parentName:"p",href:"https://github.com/cockroachdb/sqlalchemy-cockroachdb"},"sqlalchemy-cockroachdb"),"."),(0,r.yg)("p",null,"The expected connection string is formatted as follows:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"cockroachdb://root@{hostname}:{port}/{database}?sslmode=disable\n")),(0,r.yg)("h4",{id:"cratedb"},"CrateDB"),(0,r.yg)("p",null,"The recommended connector library for CrateDB is\n",(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/crate/"},"crate"),".\nYou need to install the extras as well for this library.\nWe recommend adding something like the following\ntext to your requirements file:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"crate[sqlalchemy]==0.26.0\n")),(0,r.yg)("p",null,"The expected connection string is formatted as follows:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"crate://crate@127.0.0.1:4200\n")),(0,r.yg)("h4",{id:"databend"},"Databend"),(0,r.yg)("p",null,"The recommended connector library for Databend is ",(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/databend-sqlalchemy/"},"databend-sqlalchemy"),".\nSuperset has been tested on ",(0,r.yg)("inlineCode",{parentName:"p"},"databend-sqlalchemy>=0.2.3"),"."),(0,r.yg)("p",null,"The recommended connection string is:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"databend://{username}:{password}@{host}:{port}/{database_name}\n")),(0,r.yg)("p",null,"Here's a connection string example of Superset connecting to a Databend database:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"databend://user:password@localhost:8000/default?secure=false\n")),(0,r.yg)("h4",{id:"databricks"},"Databricks"),(0,r.yg)("p",null,"Databricks now offer a native DB API 2.0 driver, ",(0,r.yg)("inlineCode",{parentName:"p"},"databricks-sql-connector"),", that can be used with the ",(0,r.yg)("inlineCode",{parentName:"p"},"sqlalchemy-databricks")," dialect. You can install both with:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},'pip install "apache-superset[databricks]"\n')),(0,r.yg)("p",null,"To use the Hive connector you need the following information from your cluster:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Server hostname"),(0,r.yg)("li",{parentName:"ul"},"Port"),(0,r.yg)("li",{parentName:"ul"},"HTTP path")),(0,r.yg)("p",null,'These can be found under "Configuration" -> "Advanced Options" -> "JDBC/ODBC".'),(0,r.yg)("p",null,'You also need an access token from "Settings" -> "User Settings" -> "Access Tokens".'),(0,r.yg)("p",null,'Once you have all this information, add a database of type "Databricks Native Connector" and use the following SQLAlchemy URI:'),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"databricks+connector://token:{access_token}@{server_hostname}:{port}/{database_name}\n")),(0,r.yg)("p",null,'You also need to add the following configuration to "Other" -> "Engine Parameters", with your HTTP path:'),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "connect_args": {"http_path": "sql/protocolv1/o/****"}\n}\n')),(0,r.yg)("h5",{id:"older-driver"},"Older driver"),(0,r.yg)("p",null,"Originally Superset used ",(0,r.yg)("inlineCode",{parentName:"p"},"databricks-dbapi")," to connect to Databricks. You might want to try it if you're having problems with the official Databricks connector:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},'pip install "databricks-dbapi[sqlalchemy]"\n')),(0,r.yg)("p",null,"There are two ways to connect to Databricks when using ",(0,r.yg)("inlineCode",{parentName:"p"},"databricks-dbapi"),": using a Hive connector or an ODBC connector. Both ways work similarly, but only ODBC can be used to connect to ",(0,r.yg)("a",{parentName:"p",href:"https://docs.databricks.com/sql/admin/sql-endpoints.html"},"SQL endpoints"),"."),(0,r.yg)("h4",{id:"hive"},"Hive"),(0,r.yg)("p",null,'To connect to a Hive cluster add a database of type "Databricks Interactive Cluster" in Superset, and use the following SQLAlchemy URI:'),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"databricks+pyhive://token:{access_token}@{server_hostname}:{port}/{database_name}\n")),(0,r.yg)("p",null,'You also need to add the following configuration to "Other" -> "Engine Parameters", with your HTTP path:'),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{"connect_args": {"http_path": "sql/protocolv1/o/****"}}\n')),(0,r.yg)("h4",{id:"odbc"},"ODBC"),(0,r.yg)("p",null,"For ODBC you first need to install the ",(0,r.yg)("a",{parentName:"p",href:"https://databricks.com/spark/odbc-drivers-download"},"ODBC drivers for your platform"),"."),(0,r.yg)("p",null,'For a regular connection use this as the SQLAlchemy URI after selecting either "Databricks Interactive Cluster" or "Databricks SQL Endpoint" for the database, depending on your use case:'),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"databricks+pyodbc://token:{access_token}@{server_hostname}:{port}/{database_name}\n")),(0,r.yg)("p",null,"And for the connection arguments:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{"connect_args": {"http_path": "sql/protocolv1/o/****", "driver_path": "/path/to/odbc/driver"}}\n')),(0,r.yg)("p",null,"The driver path should be:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"/Library/simba/spark/lib/libsparkodbc_sbu.dylib")," (Mac OS)"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"/opt/simba/spark/lib/64/libsparkodbc_sb64.so")," (Linux)")),(0,r.yg)("p",null,"For a connection to a SQL endpoint you need to use the HTTP path from the endpoint:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{"connect_args": {"http_path": "/sql/1.0/endpoints/****", "driver_path": "/path/to/odbc/driver"}}\n')),(0,r.yg)("h4",{id:"dremio"},"Dremio"),(0,r.yg)("p",null,"The recommended connector library for Dremio is\n",(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/sqlalchemy-dremio/"},"sqlalchemy_dremio"),"."),(0,r.yg)("p",null,"The expected connection string for ODBC (Default port is 31010) is formatted as follows:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"dremio://{username}:{password}@{host}:{port}/{database_name}/dremio?SSL=1\n")),(0,r.yg)("p",null,"The expected connection string for Arrow Flight (Dremio 4.9.1+. Default port is 32010) is formatted as follows:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"dremio+flight://{username}:{password}@{host}:{port}/dremio\n")),(0,r.yg)("p",null,"This ",(0,r.yg)("a",{parentName:"p",href:"https://www.dremio.com/tutorials/dremio-apache-superset/"},"blog post by Dremio")," has some\nadditional helpful instructions on connecting Superset to Dremio."),(0,r.yg)("h4",{id:"apache-drill"},"Apache Drill"),(0,r.yg)("h5",{id:"sqlalchemy"},"SQLAlchemy"),(0,r.yg)("p",null,"The recommended way to connect to Apache Drill is through SQLAlchemy. You can use the\n",(0,r.yg)("a",{parentName:"p",href:"https://github.com/JohnOmernik/sqlalchemy-drill"},"sqlalchemy-drill")," package."),(0,r.yg)("p",null,"Once that is done, you can connect to Drill in two ways, either via the REST interface or by JDBC.\nIf you are connecting via JDBC, you must have the Drill JDBC Driver installed."),(0,r.yg)("p",null,"The basic connection string for Drill looks like this:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"drill+sadrill://<username>:<password>@<host>:<port>/<storage_plugin>?use_ssl=True\n")),(0,r.yg)("p",null,"To connect to Drill running on a local machine running in embedded mode you can use the following\nconnection string:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"drill+sadrill://localhost:8047/dfs?use_ssl=False\n")),(0,r.yg)("h5",{id:"jdbc"},"JDBC"),(0,r.yg)("p",null,"Connecting to Drill through JDBC is more complicated and we recommend following\n",(0,r.yg)("a",{parentName:"p",href:"https://drill.apache.org/docs/using-the-jdbc-driver/"},"this tutorial"),"."),(0,r.yg)("p",null,"The connection string looks like:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"drill+jdbc://<username>:<password>@<host>:<port>\n")),(0,r.yg)("h5",{id:"odbc-1"},"ODBC"),(0,r.yg)("p",null,"We recommend reading the\n",(0,r.yg)("a",{parentName:"p",href:"https://drill.apache.org/docs/installing-the-driver-on-linux/"},"Apache Drill documentation")," and read\nthe ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/JohnOmernik/sqlalchemy-drill#usage-with-odbc"},"GitHub README")," to learn how to\nwork with Drill through ODBC."),(0,r.yg)("h4",{id:"apache-druid"},"Apache Druid"),(0,r.yg)("p",null,"A native connector to Druid ships with Superset (behind the ",(0,r.yg)("inlineCode",{parentName:"p"},"DRUID_IS_ACTIVE")," flag) but this is\nslowly getting deprecated in favor of the SQLAlchemy / DBAPI connector made available in the\n",(0,r.yg)("a",{parentName:"p",href:"https://pythonhosted.org/pydruid/"},"pydruid library"),"."),(0,r.yg)("p",null,"The connection string looks like:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"druid://<User>:<password>@<Host>:<Port-default-9088>/druid/v2/sql\n")),(0,r.yg)("p",null,"Here's a breakdown of the key components of this connection string:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"User"),": username portion of the credentials needed to connect to your database"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"Password"),": password portion of the credentials needed to connect to your database"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"Host"),": IP address (or URL) of the host machine that's running your database"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"Port"),": specific port that's exposed on your host machine where your database is running")),(0,r.yg)("h5",{id:"customizing-druid-connection"},"Customizing Druid Connection"),(0,r.yg)("p",null,"When adding a connection to Druid, you can customize the connection a few different ways in the\n",(0,r.yg)("strong",{parentName:"p"},"Add Database")," form."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Custom Certificate")),(0,r.yg)("p",null,"You can add certificates in the ",(0,r.yg)("strong",{parentName:"p"},"Root Certificate")," field when configuring the new database\nconnection to Druid:"),(0,r.yg)("img",{src:(0,o.A)("/img/root-cert-example.png")})," ",(0,r.yg)("p",null,"When using a custom certificate, pydruid will automatically use https scheme."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Disable SSL Verification")),(0,r.yg)("p",null,"To disable SSL verification, add the following to the ",(0,r.yg)("strong",{parentName:"p"},"Extras")," field:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},'engine_params:\n{"connect_args":\n    {"scheme": "https", "ssl_verify_cert": false}}\n')),(0,r.yg)("h5",{id:"aggregations"},"Aggregations"),(0,r.yg)("p",null,"Common aggregations or Druid metrics can be defined and used in Superset. The first and simpler use\ncase is to use the checkbox matrix exposed in your datasource\u2019s edit view (",(0,r.yg)("strong",{parentName:"p"},"Sources -> Druid\nDatasources -> ","[your datasource]"," -> Edit -> ","[tab]"," List Druid Column"),")."),(0,r.yg)("p",null,"Clicking the GroupBy and Filterable checkboxes will make the column appear in the related dropdowns\nwhile in the Explore view. Checking Count Distinct, Min, Max or Sum will result in creating new\nmetrics that will appear in the ",(0,r.yg)("strong",{parentName:"p"},"List Druid Metric")," tab upon saving the datasource."),(0,r.yg)("p",null,"By editing these metrics, you\u2019ll notice that their JSON element corresponds to Druid aggregation\ndefinition. You can create your own aggregations manually from the ",(0,r.yg)("strong",{parentName:"p"},"List Druid Metric")," tab\nfollowing Druid documentation."),(0,r.yg)("h5",{id:"post-aggregations"},"Post-Aggregations"),(0,r.yg)("p",null,"Druid supports post aggregation and this works in Superset. All you have to do is create a metric,\nmuch like you would create an aggregation manually, but specify ",(0,r.yg)("inlineCode",{parentName:"p"},"postagg")," as a ",(0,r.yg)("inlineCode",{parentName:"p"},"Metric Type"),". You\nthen have to provide a valid json post-aggregation definition (as specified in the Druid docs) in\nthe JSON field."),(0,r.yg)("h4",{id:"elasticsearch"},"Elasticsearch"),(0,r.yg)("p",null,"The recommended connector library for Elasticsearch is\n",(0,r.yg)("a",{parentName:"p",href:"https://github.com/preset-io/elasticsearch-dbapi"},"elasticsearch-dbapi"),"."),(0,r.yg)("p",null,"The connection string for Elasticsearch looks like this:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"elasticsearch+http://{user}:{password}@{host}:9200/\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Using HTTPS")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"elasticsearch+https://{user}:{password}@{host}:9200/\n")),(0,r.yg)("p",null,"Elasticsearch as a default limit of 10000 rows, so you can increase this limit on your cluster or\nset Superset\u2019s row limit on config"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"ROW_LIMIT = 10000\n")),(0,r.yg)("p",null,"You can query multiple indices on SQL Lab for example"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},'SELECT timestamp, agent FROM "logstash"\n')),(0,r.yg)("p",null,"But, to use visualizations for multiple indices you need to create an alias index on your cluster"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},'POST /_aliases\n{\n    "actions" : [\n        { "add" : { "index" : "logstash-**", "alias" : "logstash_all" } }\n    ]\n}\n')),(0,r.yg)("p",null,"Then register your table with the alias name logstash_all"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Time zone")),(0,r.yg)("p",null,"By default, Superset uses UTC time zone for elasticsearch query. If you need to specify a time zone,\nplease edit your Database and enter the settings of your specified time zone in the Other > ENGINE PARAMETERS:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},'{\n    "connect_args": {\n        "time_zone": "Asia/Shanghai"\n    }\n}\n')),(0,r.yg)("p",null,"Another issue to note about the time zone problem is that before elasticsearch7.8, if you want to convert a string into a ",(0,r.yg)("inlineCode",{parentName:"p"},"DATETIME")," object,\nyou need to use the ",(0,r.yg)("inlineCode",{parentName:"p"},"CAST")," function,but this function does not support our ",(0,r.yg)("inlineCode",{parentName:"p"},"time_zone")," setting. So it is recommended to upgrade to the version after elasticsearch7.8.\nAfter elasticsearch7.8, you can use the ",(0,r.yg)("inlineCode",{parentName:"p"},"DATETIME_PARSE")," function to solve this problem.\nThe DATETIME_PARSE function is to support our ",(0,r.yg)("inlineCode",{parentName:"p"},"time_zone")," setting, and here you need to fill in your elasticsearch version number in the Other > VERSION setting.\nthe superset will use the ",(0,r.yg)("inlineCode",{parentName:"p"},"DATETIME_PARSE")," function for conversion."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Disable SSL Verification")),(0,r.yg)("p",null,"To disable SSL verification, add the following to the ",(0,r.yg)("strong",{parentName:"p"},"SQLALCHEMY URI")," field:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"elasticsearch+https://{user}:{password}@{host}:9200/?verify_certs=False\n")),(0,r.yg)("h4",{id:"exasol"},"Exasol"),(0,r.yg)("p",null,"The recommended connector library for Exasol is\n",(0,r.yg)("a",{parentName:"p",href:"https://github.com/exasol/sqlalchemy-exasol"},"sqlalchemy-exasol"),"."),(0,r.yg)("p",null,"The connection string for Exasol looks like this:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"exa+pyodbc://{username}:{password}@{hostname}:{port}/my_schema?CONNECTIONLCALL=en_US.UTF-8&driver=EXAODBC\n")),(0,r.yg)("h4",{id:"firebird"},"Firebird"),(0,r.yg)("p",null,"The recommended connector library for Firebird is ",(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/sqlalchemy-firebird/"},"sqlalchemy-firebird"),".\nSuperset has been tested on ",(0,r.yg)("inlineCode",{parentName:"p"},"sqlalchemy-firebird>=0.7.0, <0.8"),"."),(0,r.yg)("p",null,"The recommended connection string is:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"firebird+fdb://{username}:{password}@{host}:{port}//{path_to_db_file}\n")),(0,r.yg)("p",null,"Here's a connection string example of Superset connecting to a local Firebird database:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"firebird+fdb://SYSDBA:masterkey@192.168.86.38:3050//Library/Frameworks/Firebird.framework/Versions/A/Resources/examples/empbuild/employee.fdb\n")),(0,r.yg)("h4",{id:"firebolt"},"Firebolt"),(0,r.yg)("p",null,"The recommended connector library for Firebolt is ",(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/firebolt-sqlalchemy/"},"firebolt-sqlalchemy"),"."),(0,r.yg)("p",null,"The recommended connection string is:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"firebolt://{username}:{password}@{database}?account_name={name}\nor\nfirebolt://{username}:{password}@{database}/{engine_name}?account_name={name}\n")),(0,r.yg)("p",null,"It's also possible to connect using a service account:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"firebolt://{client_id}:{client_secret}@{database}?account_name={name}\nor\nfirebolt://{client_id}:{client_secret}@{database}/{engine_name}?account_name={name}\n")),(0,r.yg)("h4",{id:"google-bigquery"},"Google BigQuery"),(0,r.yg)("p",null,"The recommended connector library for BigQuery is\n",(0,r.yg)("a",{parentName:"p",href:"https://github.com/googleapis/python-bigquery-sqlalchemy"},"sqlalchemy-bigquery"),"."),(0,r.yg)("h5",{id:"install-bigquery-driver"},"Install BigQuery Driver"),(0,r.yg)("p",null,"Follow the steps ",(0,r.yg)("a",{parentName:"p",href:"/docs/configuration/databases#docker-add-drivers"},"here")," about how to\ninstall new database drivers when setting up Superset locally via docker compose."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},'echo "sqlalchemy-bigquery" >> ./docker/requirements-local.txt\n')),(0,r.yg)("h5",{id:"connecting-to-bigquery"},"Connecting to BigQuery"),(0,r.yg)("p",null,"When adding a new BigQuery connection in Superset, you'll need to add the GCP Service Account\ncredentials file (as a JSON)."),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Create your Service Account via the Google Cloud Platform control panel, provide it access to the\nappropriate BigQuery datasets, and download the JSON configuration file for the service account."),(0,r.yg)("li",{parentName:"ol"},"In Superset, you can either upload that JSON or add the JSON blob in the following format (this should be the content of your credential JSON file):")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},'{\n        "type": "service_account",\n        "project_id": "...",\n        "private_key_id": "...",\n        "private_key": "...",\n        "client_email": "...",\n        "client_id": "...",\n        "auth_uri": "...",\n        "token_uri": "...",\n        "auth_provider_x509_cert_url": "...",\n        "client_x509_cert_url": "..."\n    }\n')),(0,r.yg)("p",null,(0,r.yg)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/52086618/138352958-a18ef9cb-8880-4ef1-88c1-452a9f1b8105.gif",alt:"CleanShot 2021-10-22 at 04 18 11"})),(0,r.yg)("ol",{start:3},(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Additionally, can connect via SQLAlchemy URI instead"),(0,r.yg)("p",{parentName:"li"},"The connection string for BigQuery looks like:"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre"},"bigquery://{project_id}\n")),(0,r.yg)("p",{parentName:"li"},"Go to the ",(0,r.yg)("strong",{parentName:"p"},"Advanced")," tab, Add a JSON blob to the ",(0,r.yg)("strong",{parentName:"p"},"Secure Extra")," field in the database configuration form with\nthe following format:"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre"},'{\n"credentials_info": <contents of credentials JSON file>\n}\n')),(0,r.yg)("p",{parentName:"li"},"The resulting file should have this structure:"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre"},'{\n "credentials_info": {\n     "type": "service_account",\n     "project_id": "...",\n     "private_key_id": "...",\n     "private_key": "...",\n     "client_email": "...",\n     "client_id": "...",\n     "auth_uri": "...",\n     "token_uri": "...",\n     "auth_provider_x509_cert_url": "...",\n     "client_x509_cert_url": "..."\n     }\n }\n')))),(0,r.yg)("p",null,"You should then be able to connect to your BigQuery datasets."),(0,r.yg)("p",null,(0,r.yg)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/52086618/138354340-df57f477-d3e5-42d4-b032-d901c69d2213.gif",alt:"CleanShot 2021-10-22 at 04 47 08"})),(0,r.yg)("p",null,"To be able to upload CSV or Excel files to BigQuery in Superset, you'll need to also add the\n",(0,r.yg)("a",{parentName:"p",href:"https://github.com/pydata/pandas-gbq"},"pandas_gbq")," library."),(0,r.yg)("p",null,"Currently, Google BigQuery python sdk is not compatible with ",(0,r.yg)("inlineCode",{parentName:"p"},"gevent"),", due to some dynamic monkeypatching on python core library by ",(0,r.yg)("inlineCode",{parentName:"p"},"gevent"),".\nSo, when you deploy Superset with ",(0,r.yg)("inlineCode",{parentName:"p"},"gunicorn")," server, you have to use worker type except ",(0,r.yg)("inlineCode",{parentName:"p"},"gevent"),"."),(0,r.yg)("h4",{id:"google-sheets"},"Google Sheets"),(0,r.yg)("p",null,"Google Sheets has a very limited\n",(0,r.yg)("a",{parentName:"p",href:"https://developers.google.com/chart/interactive/docs/querylanguage"},"SQL API"),". The recommended\nconnector library for Google Sheets is ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/betodealmeida/shillelagh"},"shillelagh"),"."),(0,r.yg)("p",null,"There are a few steps involved in connecting Superset to Google Sheets. This\n",(0,r.yg)("a",{parentName:"p",href:"https://preset.io/blog/2020-06-01-connect-superset-google-sheets/"},"tutorial")," has the most up to date\ninstructions on setting up this connection."),(0,r.yg)("h4",{id:"hana"},"Hana"),(0,r.yg)("p",null,"The recommended connector library is ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/SAP/sqlalchemy-hana"},"sqlalchemy-hana"),"."),(0,r.yg)("p",null,"The connection string is formatted as follows:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"hana://{username}:{password}@{host}:{port}\n")),(0,r.yg)("h4",{id:"apache-hive"},"Apache Hive"),(0,r.yg)("p",null,"The ",(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/PyHive/"},"pyhive")," library is the recommended way to connect to Hive through SQLAlchemy."),(0,r.yg)("p",null,"The expected connection string is formatted as follows:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"hive://hive@{hostname}:{port}/{database}\n")),(0,r.yg)("h4",{id:"hologres"},"Hologres"),(0,r.yg)("p",null,"Hologres is a real-time interactive analytics service developed by Alibaba Cloud. It is fully compatible with PostgreSQL 11 and integrates seamlessly with the big data ecosystem."),(0,r.yg)("p",null,"Hologres sample connection parameters:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"User Name"),": The AccessKey ID of your Alibaba Cloud account."),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Password"),": The AccessKey secret of your Alibaba Cloud account."),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Database Host"),": The public endpoint of the Hologres instance."),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Database Name"),": The name of the Hologres database."),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Port"),": The port number of the Hologres instance.")),(0,r.yg)("p",null,"The connection string looks like:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"postgresql+psycopg2://{username}:{password}@{host}:{port}/{database}\n")),(0,r.yg)("h4",{id:"ibm-db2"},"IBM DB2"),(0,r.yg)("p",null,"The ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/ibmdb/python-ibmdbsa/tree/master/ibm_db_sa"},"IBM_DB_SA")," library provides a\nPython / SQLAlchemy interface to IBM Data Servers."),(0,r.yg)("p",null,"Here's the recommended connection string:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"db2+ibm_db://{username}:{passport}@{hostname}:{port}/{database}\n")),(0,r.yg)("p",null,"There are two DB2 dialect versions implemented in SQLAlchemy. If you are connecting to a DB2 version without ",(0,r.yg)("inlineCode",{parentName:"p"},"LIMIT [n]")," syntax, the recommended connection string to be able to use the SQL Lab is:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"ibm_db_sa://{username}:{passport}@{hostname}:{port}/{database}\n")),(0,r.yg)("h4",{id:"apache-impala"},"Apache Impala"),(0,r.yg)("p",null,"The recommended connector library to Apache Impala is ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/cloudera/impyla"},"impyla"),"."),(0,r.yg)("p",null,"The expected connection string is formatted as follows:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"impala://{hostname}:{port}/{database}\n")),(0,r.yg)("h4",{id:"kusto"},"Kusto"),(0,r.yg)("p",null,"The recommended connector library for Kusto is\n",(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/sqlalchemy-kusto/2.0.0/"},"sqlalchemy-kusto"),">=2.0.0."),(0,r.yg)("p",null,"The connection string for Kusto (sql dialect) looks like this:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"kustosql+https://{cluster_url}/{database}?azure_ad_client_id={azure_ad_client_id}&azure_ad_client_secret={azure_ad_client_secret}&azure_ad_tenant_id={azure_ad_tenant_id}&msi=False\n")),(0,r.yg)("p",null,"The connection string for Kusto (kql dialect) looks like this:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"kustokql+https://{cluster_url}/{database}?azure_ad_client_id={azure_ad_client_id}&azure_ad_client_secret={azure_ad_client_secret}&azure_ad_tenant_id={azure_ad_tenant_id}&msi=False\n")),(0,r.yg)("p",null,"Make sure the user has privileges to access and use all required\ndatabases/tables/views."),(0,r.yg)("h4",{id:"apache-kylin"},"Apache Kylin"),(0,r.yg)("p",null,"The recommended connector library for Apache Kylin is\n",(0,r.yg)("a",{parentName:"p",href:"https://github.com/Kyligence/kylinpy"},"kylinpy"),"."),(0,r.yg)("p",null,"The expected connection string is formatted as follows:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"kylin://<username>:<password>@<hostname>:<port>/<project>?<param1>=<value1>&<param2>=<value2>\n")),(0,r.yg)("h4",{id:"mysql"},"MySQL"),(0,r.yg)("p",null,"The recommended connector library for MySQL is ",(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/mysqlclient/"},"mysqlclient"),"."),(0,r.yg)("p",null,"Here's the connection string:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"mysql://{username}:{password}@{host}/{database}\n")),(0,r.yg)("p",null,"Host:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"For Localhost: ",(0,r.yg)("inlineCode",{parentName:"li"},"localhost")," or ",(0,r.yg)("inlineCode",{parentName:"li"},"127.0.0.1")),(0,r.yg)("li",{parentName:"ul"},"Docker running on Linux: ",(0,r.yg)("inlineCode",{parentName:"li"},"172.18.0.1")),(0,r.yg)("li",{parentName:"ul"},"For On Prem: IP address or Host name"),(0,r.yg)("li",{parentName:"ul"},"For Docker running in OSX: ",(0,r.yg)("inlineCode",{parentName:"li"},"docker.for.mac.host.internal"),"\nPort: ",(0,r.yg)("inlineCode",{parentName:"li"},"3306")," by default")),(0,r.yg)("p",null,"One problem with ",(0,r.yg)("inlineCode",{parentName:"p"},"mysqlclient")," is that it will fail to connect to newer MySQL databases using ",(0,r.yg)("inlineCode",{parentName:"p"},"caching_sha2_password")," for authentication, since the plugin is not included in the client. In this case, you should use ",(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/mysql-connector-python/"},"mysql-connector-python")," instead:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"mysql+mysqlconnector://{username}:{password}@{host}/{database}\n")),(0,r.yg)("h4",{id:"ibm-netezza-performance-server"},"IBM Netezza Performance Server"),(0,r.yg)("p",null,"The ",(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/nzalchemy/"},"nzalchemy")," library provides a\nPython / SQLAlchemy interface to IBM Netezza Performance Server (aka Netezza)."),(0,r.yg)("p",null,"Here's the recommended connection string:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"netezza+nzpy://{username}:{password}@{hostname}:{port}/{database}\n")),(0,r.yg)("h4",{id:"ocient-db"},"Ocient DB"),(0,r.yg)("p",null,"The recommended connector library for Ocient is ",(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/sqlalchemy-ocient"},"sqlalchemy-ocient"),"."),(0,r.yg)("h5",{id:"install-the-ocient-driver"},"Install the Ocient Driver"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"pip install sqlalchemy-ocient\n")),(0,r.yg)("h5",{id:"connecting-to-ocient"},"Connecting to Ocient"),(0,r.yg)("p",null,"The format of the Ocient DSN is:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-shell"},"ocient://user:password@[host][:port][/database][?param1=value1&...]\n")),(0,r.yg)("h4",{id:"oracle"},"Oracle"),(0,r.yg)("p",null,"The recommended connector library is\n",(0,r.yg)("a",{parentName:"p",href:"https://cx-oracle.readthedocs.io/en/latest/user_guide/installation.html"},"cx_Oracle"),"."),(0,r.yg)("p",null,"The connection string is formatted as follows:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"oracle://<username>:<password>@<hostname>:<port>\n")),(0,r.yg)("h4",{id:"apache-pinot"},"Apache Pinot"),(0,r.yg)("p",null,"The recommended connector library for Apache Pinot is ",(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/pinotdb/"},"pinotdb"),"."),(0,r.yg)("p",null,"The expected connection string is formatted as follows:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"pinot+http://<pinot-broker-host>:<pinot-broker-port>/query?controller=http://<pinot-controller-host>:<pinot-controller-port>/``\n")),(0,r.yg)("p",null,"The expected connection string using username and password is formatted as follows:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"pinot://<username>:<password>@<pinot-broker-host>:<pinot-broker-port>/query/sql?controller=http://<pinot-controller-host>:<pinot-controller-port>/verify_ssl=true``\n")),(0,r.yg)("h4",{id:"postgres"},"Postgres"),(0,r.yg)("p",null,"Note that, if you're using docker compose, the Postgres connector library ",(0,r.yg)("a",{parentName:"p",href:"https://www.psycopg.org/docs/"},"psycopg2"),"\ncomes out of the box with Superset."),(0,r.yg)("p",null,"Postgres sample connection parameters:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"User Name"),": UserName"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Password"),": DBPassword"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Database Host"),":",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"For Localhost: localhost or 127.0.0.1"),(0,r.yg)("li",{parentName:"ul"},"For On Prem: IP address or Host name"),(0,r.yg)("li",{parentName:"ul"},"For AWS Endpoint"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Database Name"),": Database Name"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Port"),": default 5432")),(0,r.yg)("p",null,"The connection string looks like:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"postgresql://{username}:{password}@{host}:{port}/{database}\n")),(0,r.yg)("p",null,"You can require SSL by adding ",(0,r.yg)("inlineCode",{parentName:"p"},"?sslmode=require")," at the end:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"postgresql://{username}:{password}@{host}:{port}/{database}?sslmode=require\n")),(0,r.yg)("p",null,"You can read about the other SSL modes that Postgres supports in\n",(0,r.yg)("a",{parentName:"p",href:"https://www.postgresql.org/docs/9.1/libpq-ssl.html"},"Table 31-1 from this documentation"),"."),(0,r.yg)("p",null,"More information about PostgreSQL connection options can be found in the\n",(0,r.yg)("a",{parentName:"p",href:"https://docs.sqlalchemy.org/en/13/dialects/postgresql.html#module-sqlalchemy.dialects.postgresql.psycopg2"},"SQLAlchemy docs"),"\nand the\n",(0,r.yg)("a",{parentName:"p",href:"https://www.postgresql.org/docs/9.1/libpq-connect.html#LIBPQ-PQCONNECTDBPARAMS"},"PostgreSQL docs"),"."),(0,r.yg)("h4",{id:"presto"},"Presto"),(0,r.yg)("p",null,"The ",(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/PyHive/"},"pyhive")," library is the recommended way to connect to Presto through SQLAlchemy."),(0,r.yg)("p",null,"The expected connection string is formatted as follows:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"presto://{hostname}:{port}/{database}\n")),(0,r.yg)("p",null,"You can pass in a username and password as well:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"presto://{username}:{password}@{hostname}:{port}/{database}\n")),(0,r.yg)("p",null,"Here is an example connection string with values:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"presto://datascientist:securepassword@presto.example.com:8080/hive\n")),(0,r.yg)("p",null,"By default Superset assumes the most recent version of Presto is being used when querying the\ndatasource. If you\u2019re using an older version of Presto, you can configure it in the extra parameter:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},'{\n    "version": "0.123"\n}\n')),(0,r.yg)("p",null,"SSL Secure extra add json config to extra connection information."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},'   {\n     "connect_args":\n    {"protocol": "https",\n     "requests_kwargs":{"verify":false}\n  }\n}\n')),(0,r.yg)("h4",{id:"risingwave"},"RisingWave"),(0,r.yg)("p",null,"The recommended connector library for RisingWave is\n",(0,r.yg)("a",{parentName:"p",href:"https://github.com/risingwavelabs/sqlalchemy-risingwave"},"sqlalchemy-risingwave"),"."),(0,r.yg)("p",null,"The expected connection string is formatted as follows:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"risingwave://root@{hostname}:{port}/{database}?sslmode=disable\n")),(0,r.yg)("h4",{id:"rockset"},"Rockset"),(0,r.yg)("p",null,"The connection string for Rockset is:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"rockset://{api key}:@{api server}\n")),(0,r.yg)("p",null,"Get your API key from the ",(0,r.yg)("a",{parentName:"p",href:"https://console.rockset.com/apikeys"},"Rockset console"),".\nFind your API server from the ",(0,r.yg)("a",{parentName:"p",href:"https://rockset.com/docs/rest-api/#introduction"},"API reference"),". Omit the ",(0,r.yg)("inlineCode",{parentName:"p"},"https://")," portion of the URL."),(0,r.yg)("p",null,"To target to a specific virtual instance, use this URI format:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"rockset://{api key}:@{api server}/{VI ID}\n")),(0,r.yg)("p",null,"For more complete instructions, we recommend the ",(0,r.yg)("a",{parentName:"p",href:"https://docs.rockset.com/apache-superset/"},"Rockset documentation"),"."),(0,r.yg)("h4",{id:"snowflake"},"Snowflake"),(0,r.yg)("h5",{id:"install-snowflake-driver"},"Install Snowflake Driver"),(0,r.yg)("p",null,"Follow the steps ",(0,r.yg)("a",{parentName:"p",href:"/docs/configuration/databases#installing-database-drivers"},"here")," about how to\ninstall new database drivers when setting up Superset locally via docker compose."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},'echo "snowflake-sqlalchemy" >> ./docker/requirements-local.txt\n')),(0,r.yg)("p",null,"The recommended connector library for Snowflake is\n",(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/snowflake-sqlalchemy/"},"snowflake-sqlalchemy"),"."),(0,r.yg)("p",null,"The connection string for Snowflake looks like this:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"snowflake://{user}:{password}@{account}.{region}/{database}?role={role}&warehouse={warehouse}\n")),(0,r.yg)("p",null,"The schema is not necessary in the connection string, as it is defined per table/query. The role and\nwarehouse can be omitted if defaults are defined for the user, i.e."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"snowflake://{user}:{password}@{account}.{region}/{database}\n")),(0,r.yg)("p",null,"Make sure the user has privileges to access and use all required\ndatabases/schemas/tables/views/warehouses, as the Snowflake SQLAlchemy engine does not test for\nuser/role rights during engine creation by default. However, when pressing the \u201cTest Connection\u201d\nbutton in the Create or Edit Database dialog, user/role credentials are validated by passing\n\u201cvalidate_default_parameters\u201d: True to the connect() method during engine creation. If the user/role\nis not authorized to access the database, an error is recorded in the Superset logs."),(0,r.yg)("p",null,"And if you want connect Snowflake with ",(0,r.yg)("a",{parentName:"p",href:"https://docs.snowflake.com/en/user-guide/key-pair-auth.html#step-6-configure-the-snowflake-client-to-use-key-pair-authentication"},"Key Pair Authentication"),'.\nPlease make sure you have the key pair and the public key is registered in Snowflake.\nTo connect Snowflake with Key Pair Authentication, you need to add the following parameters to "SECURE EXTRA" field.'),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},(0,r.yg)("em",{parentName:"strong"},"Please note that you need to merge multi-line private key content to one line and insert ",(0,r.yg)("inlineCode",{parentName:"em"},"\\n")," between each line"))),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},'{\n     "auth_method": "keypair",\n     "auth_params": {\n         "privatekey_body": "-----BEGIN ENCRYPTED PRIVATE KEY-----\\n...\\n...\\n-----END ENCRYPTED PRIVATE KEY-----",\n         "privatekey_pass":"Your Private Key Password"\n     }\n }\n')),(0,r.yg)("p",null,'If your private key is stored on server, you can replace "privatekey_body" with \u201cprivatekey_path\u201d in parameter.'),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},'{\n    "auth_method": "keypair",\n    "auth_params": {\n        "privatekey_path":"Your Private Key Path",\n        "privatekey_pass":"Your Private Key Password"\n    }\n}\n')),(0,r.yg)("h4",{id:"apache-solr"},"Apache Solr"),(0,r.yg)("p",null,"The ",(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/sqlalchemy-solr/"},"sqlalchemy-solr")," library provides a\nPython / SQLAlchemy interface to Apache Solr."),(0,r.yg)("p",null,"The connection string for Solr looks like this:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"solr://{username}:{password}@{host}:{port}/{server_path}/{collection}[/?use_ssl=true|false]\n")),(0,r.yg)("h4",{id:"apache-spark-sql"},"Apache Spark SQL"),(0,r.yg)("p",null,"The recommended connector library for Apache Spark SQL ",(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/PyHive/"},"pyhive"),"."),(0,r.yg)("p",null,"The expected connection string is formatted as follows:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"hive://hive@{hostname}:{port}/{database}\n")),(0,r.yg)("h4",{id:"sql-server"},"SQL Server"),(0,r.yg)("p",null,"The recommended connector library for SQL Server is ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/pymssql/pymssql"},"pymssql"),"."),(0,r.yg)("p",null,"The connection string for SQL Server looks like this:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"mssql+pymssql://<Username>:<Password>@<Host>:<Port-default:1433>/<Database Name>/?Encrypt=yes\n")),(0,r.yg)("p",null,"It is also possible to connect using ",(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/pyodbc"},"pyodbc")," with the parameter ",(0,r.yg)("a",{parentName:"p",href:"https://docs.sqlalchemy.org/en/14/dialects/mssql.html#pass-through-exact-pyodbc-string"},"odbc_connect")),(0,r.yg)("p",null,"The connection string for SQL Server looks like this:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"mssql+pyodbc:///?odbc_connect=Driver%3D%7BODBC+Driver+17+for+SQL+Server%7D%3BServer%3Dtcp%3A%3Cmy_server%3E%2C1433%3BDatabase%3Dmy_database%3BUid%3Dmy_user_name%3BPwd%3Dmy_password%3BEncrypt%3Dyes%3BConnection+Timeout%3D30\n")),(0,r.yg)("h4",{id:"starrocks"},"StarRocks"),(0,r.yg)("p",null,"The ",(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/starrocks/"},"sqlalchemy-starrocks")," library is the recommended\nway to connect to StarRocks through SQLAlchemy."),(0,r.yg)("p",null,"You'll need to the following setting values to form the connection string:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"User"),": User Name"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Password"),": DBPassword"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Host"),": StarRocks FE Host"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Catalog"),": Catalog Name"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Database"),": Database Name"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Port"),": StarRocks FE port")),(0,r.yg)("p",null,"Here's what the connection string looks like:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"starrocks://<User>:<Password>@<Host>:<Port>/<Catalog>.<Database>\n")),(0,r.yg)("h4",{id:"teradata"},"Teradata"),(0,r.yg)("p",null,"The recommended connector library is\n",(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/teradatasqlalchemy/"},"teradatasqlalchemy"),"."),(0,r.yg)("p",null,"The connection string for Teradata looks like this:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"teradatasql://{user}:{password}@{host}\n")),(0,r.yg)("h4",{id:"odbc-driver"},"ODBC Driver"),(0,r.yg)("p",null,"There's also an older connector named\n",(0,r.yg)("a",{parentName:"p",href:"https://github.com/Teradata/sqlalchemy-teradata"},"sqlalchemy-teradata")," that\nrequires the installation of ODBC drivers. The Teradata ODBC Drivers\nare available\nhere: ",(0,r.yg)("a",{parentName:"p",href:"https://downloads.teradata.com/download/connectivity/odbc-driver/linux"},"https://downloads.teradata.com/download/connectivity/odbc-driver/linux")),(0,r.yg)("p",null,"Here are the required environment variables:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"export ODBCINI=/.../teradata/client/ODBC_64/odbc.ini\nexport ODBCINST=/.../teradata/client/ODBC_64/odbcinst.ini\n")),(0,r.yg)("p",null,"We recommend using the first library because of the\nlack of requirement around ODBC drivers and\nbecause it's more regularly updated."),(0,r.yg)("h4",{id:"timescaledb"},"TimescaleDB"),(0,r.yg)("p",null,(0,r.yg)("a",{parentName:"p",href:"https://www.timescale.com"},"TimescaleDB")," is the open-source relational database for time-series and analytics to build powerful data-intensive applications.\nTimescaleDB is a PostgreSQL extension, and you can use the standard PostgreSQL connector library, ",(0,r.yg)("a",{parentName:"p",href:"https://www.psycopg.org/docs/"},"psycopg2"),", to connect to the database."),(0,r.yg)("p",null,"If you're using docker compose, psycopg2 comes out of the box with Superset."),(0,r.yg)("p",null,"TimescaleDB sample connection parameters:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"User Name"),": User"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Password"),": Password"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Database Host"),":",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"For Localhost: localhost or 127.0.0.1"),(0,r.yg)("li",{parentName:"ul"},"For On Prem: IP address or Host name"),(0,r.yg)("li",{parentName:"ul"},"For ",(0,r.yg)("a",{parentName:"li",href:"https://console.cloud.timescale.com"},"Timescale Cloud")," service: Host name"),(0,r.yg)("li",{parentName:"ul"},"For ",(0,r.yg)("a",{parentName:"li",href:"https://portal.managed.timescale.com"},"Managed Service for TimescaleDB")," service: Host name"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Database Name"),": Database Name"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Port"),": default 5432 or Port number of the service")),(0,r.yg)("p",null,"The connection string looks like:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"postgresql://{username}:{password}@{host}:{port}/{database name}\n")),(0,r.yg)("p",null,"You can require SSL by adding ",(0,r.yg)("inlineCode",{parentName:"p"},"?sslmode=require")," at the end (e.g. in case you use ",(0,r.yg)("a",{parentName:"p",href:"https://www.timescale.com/cloud"},"Timescale Cloud"),"):"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"postgresql://{username}:{password}@{host}:{port}/{database name}?sslmode=require\n")),(0,r.yg)("p",null,(0,r.yg)("a",{parentName:"p",href:"https://docs.timescale.com/"},"Learn more about TimescaleDB!")),(0,r.yg)("h4",{id:"trino"},"Trino"),(0,r.yg)("p",null,"Supported trino version 352 and higher"),(0,r.yg)("h5",{id:"connection-string"},"Connection String"),(0,r.yg)("p",null,"The connection string format is as follows:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"trino://{username}:{password}@{hostname}:{port}/{catalog}\n")),(0,r.yg)("p",null,"If you are running Trino with docker on local machine, please use the following connection URL"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"trino://trino@host.docker.internal:8080\n")),(0,r.yg)("h5",{id:"authentications"},"Authentications"),(0,r.yg)("h6",{id:"1-basic-authentication"},"1. Basic Authentication"),(0,r.yg)("p",null,"You can provide ",(0,r.yg)("inlineCode",{parentName:"p"},"username"),"/",(0,r.yg)("inlineCode",{parentName:"p"},"password")," in the connection string or in the ",(0,r.yg)("inlineCode",{parentName:"p"},"Secure Extra")," field at ",(0,r.yg)("inlineCode",{parentName:"p"},"Advanced / Security")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"In Connection String"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre"},"trino://{username}:{password}@{hostname}:{port}/{catalog}\n"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"In ",(0,r.yg)("inlineCode",{parentName:"p"},"Secure Extra")," field"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "auth_method": "basic",\n    "auth_params": {\n        "username": "<username>",\n        "password": "<password>"\n    }\n}\n')))),(0,r.yg)("p",null,"NOTE: if both are provided, ",(0,r.yg)("inlineCode",{parentName:"p"},"Secure Extra")," always takes higher priority."),(0,r.yg)("h6",{id:"2-kerberos-authentication"},"2. Kerberos Authentication"),(0,r.yg)("p",null,"In ",(0,r.yg)("inlineCode",{parentName:"p"},"Secure Extra")," field, config as following example:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "auth_method": "kerberos",\n    "auth_params": {\n        "service_name": "superset",\n        "config": "/path/to/krb5.config",\n        ...\n    }\n}\n')),(0,r.yg)("p",null,"All fields in ",(0,r.yg)("inlineCode",{parentName:"p"},"auth_params")," are passed directly to the ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/trinodb/trino-python-client/blob/0.306.0/trino/auth.py#L40"},(0,r.yg)("inlineCode",{parentName:"a"},"KerberosAuthentication"))," class."),(0,r.yg)("p",null,"NOTE: Kerberos authentication requires installing the ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/trinodb/trino-python-client"},(0,r.yg)("inlineCode",{parentName:"a"},"trino-python-client"))," locally with either the ",(0,r.yg)("inlineCode",{parentName:"p"},"all")," or ",(0,r.yg)("inlineCode",{parentName:"p"},"kerberos")," optional features, i.e., installing ",(0,r.yg)("inlineCode",{parentName:"p"},"trino[all]")," or ",(0,r.yg)("inlineCode",{parentName:"p"},"trino[kerberos]")," respectively."),(0,r.yg)("h6",{id:"3-certificate-authentication"},"3. Certificate Authentication"),(0,r.yg)("p",null,"In ",(0,r.yg)("inlineCode",{parentName:"p"},"Secure Extra")," field, config as following example:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "auth_method": "certificate",\n    "auth_params": {\n        "cert": "/path/to/cert.pem",\n        "key": "/path/to/key.pem"\n    }\n}\n')),(0,r.yg)("p",null,"All fields in ",(0,r.yg)("inlineCode",{parentName:"p"},"auth_params")," are passed directly to the ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/trinodb/trino-python-client/blob/0.315.0/trino/auth.py#L416"},(0,r.yg)("inlineCode",{parentName:"a"},"CertificateAuthentication"))," class."),(0,r.yg)("h6",{id:"4-jwt-authentication"},"4. JWT Authentication"),(0,r.yg)("p",null,"Config ",(0,r.yg)("inlineCode",{parentName:"p"},"auth_method")," and provide token in ",(0,r.yg)("inlineCode",{parentName:"p"},"Secure Extra")," field"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "auth_method": "jwt",\n    "auth_params": {\n        "token": "<your-jwt-token>"\n    }\n}\n')),(0,r.yg)("h6",{id:"5-custom-authentication"},"5. Custom Authentication"),(0,r.yg)("p",null,"To use custom authentication, first you need to add it into\n",(0,r.yg)("inlineCode",{parentName:"p"},"ALLOWED_EXTRA_AUTHENTICATIONS")," allow list in Superset config file:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-python"},'from your.module import AuthClass\nfrom another.extra import auth_method\n\nALLOWED_EXTRA_AUTHENTICATIONS: Dict[str, Dict[str, Callable[..., Any]]] = {\n    "trino": {\n        "custom_auth": AuthClass,\n        "another_auth_method": auth_method,\n    },\n}\n')),(0,r.yg)("p",null,"Then in ",(0,r.yg)("inlineCode",{parentName:"p"},"Secure Extra")," field:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "auth_method": "custom_auth",\n    "auth_params": {\n        ...\n    }\n}\n')),(0,r.yg)("p",null,"You can also use custom authentication by providing reference to your ",(0,r.yg)("inlineCode",{parentName:"p"},"trino.auth.Authentication")," class\nor factory function (which returns an ",(0,r.yg)("inlineCode",{parentName:"p"},"Authentication")," instance) to ",(0,r.yg)("inlineCode",{parentName:"p"},"auth_method"),"."),(0,r.yg)("p",null,"All fields in ",(0,r.yg)("inlineCode",{parentName:"p"},"auth_params")," are passed directly to your class/function."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Reference"),":"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://trino.io/episodes/12.html"},"Trino-Superset-Podcast"))),(0,r.yg)("h4",{id:"vertica"},"Vertica"),(0,r.yg)("p",null,"The recommended connector library is\n",(0,r.yg)("a",{parentName:"p",href:"https://pypi.org/project/sqlalchemy-vertica-python/"},"sqlalchemy-vertica-python"),". The\n",(0,r.yg)("a",{parentName:"p",href:"http://www.vertica.com/"},"Vertica")," connection parameters are:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"User Name:")," UserName"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Password:")," DBPassword"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Database Host:"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"For Localhost : localhost or 127.0.0.1"),(0,r.yg)("li",{parentName:"ul"},"For On Prem : IP address or Host name"),(0,r.yg)("li",{parentName:"ul"},"For Cloud: IP Address or Host Name"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Database Name:")," Database Name"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Port:")," default 5433")),(0,r.yg)("p",null,"The connection string is formatted as follows:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"vertica+vertica_python://{username}:{password}@{host}/{database}\n")),(0,r.yg)("p",null,"Other parameters:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Load Balancer - Backup Host")),(0,r.yg)("h4",{id:"yugabytedb"},"YugabyteDB"),(0,r.yg)("p",null,(0,r.yg)("a",{parentName:"p",href:"https://www.yugabyte.com/"},"YugabyteDB")," is a distributed SQL database built on top of PostgreSQL."),(0,r.yg)("p",null,"Note that, if you're using docker compose, the\nPostgres connector library ",(0,r.yg)("a",{parentName:"p",href:"https://www.psycopg.org/docs/"},"psycopg2"),"\ncomes out of the box with Superset."),(0,r.yg)("p",null,"The connection string looks like:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"postgresql://{username}:{password}@{host}:{port}/{database}\n")),(0,r.yg)("h2",{id:"connecting-through-the-ui"},"Connecting through the UI"),(0,r.yg)("p",null,"Here is the documentation on how to leverage the new DB Connection UI. This will provide admins the ability to enhance the UX for users who want to connect to new databases."),(0,r.yg)("p",null,(0,r.yg)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/27827808/125499607-94e300aa-1c0f-4c60-b199-3f9de41060a3.gif",alt:"db-conn-docs"})),(0,r.yg)("p",null,"There are now 3 steps when connecting to a database in the new UI:"),(0,r.yg)("p",null,"Step 1: First the admin must inform superset what engine they want to connect to. This page is powered by the ",(0,r.yg)("inlineCode",{parentName:"p"},"/available")," endpoint which pulls on the engines currently installed in your environment, so that only supported databases are shown."),(0,r.yg)("p",null,"Step 2: Next, the admin is prompted to enter database specific parameters. Depending on whether there is a dynamic form available for that specific engine, the admin will either see the new custom form or the legacy SQLAlchemy form. We currently have built dynamic forms for (Redshift, MySQL, Postgres, and BigQuery). The new form prompts the user for the parameters needed to connect (for example, username, password, host, port, etc.) and provides immediate feedback on errors."),(0,r.yg)("p",null,"Step 3: Finally, once the admin has connected to their DB using the dynamic form they have the opportunity to update any optional advanced settings."),(0,r.yg)("p",null,"We hope this feature will help eliminate a huge bottleneck for users to get into the application and start crafting datasets."),(0,r.yg)("h5",{id:"how-to-setup-up-preferred-database-options-and-images"},"How to setup up preferred database options and images"),(0,r.yg)("p",null,"We added a new configuration option where the admin can define their preferred databases, in order:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-python"},'# A list of preferred databases, in order. These databases will be\n# displayed prominently in the "Add Database" dialog. You should\n# use the "engine_name" attribute of the corresponding DB engine spec\n# in `superset/db_engine_specs/`.\nPREFERRED_DATABASES: list[str] = [\n    "PostgreSQL",\n    "Presto",\n    "MySQL",\n    "SQLite",\n]\n')),(0,r.yg)("p",null,"For copyright reasons the logos for each database are not distributed with Superset."),(0,r.yg)("h5",{id:"setting-images"},"Setting images"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"To set the images of your preferred database, admins must create a mapping in the ",(0,r.yg)("inlineCode",{parentName:"li"},"superset_text.yml")," file with engine and location of the image. The image can be host locally inside your static/file directory or online (e.g. S3)")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-python"},'DB_IMAGES:\n  postgresql: "path/to/image/postgres.jpg"\n  bigquery: "path/to/s3bucket/bigquery.jpg"\n  snowflake: "path/to/image/snowflake.jpg"\n')),(0,r.yg)("h5",{id:"how-to-add-new-database-engines-to-available-endpoint"},"How to add new database engines to available endpoint"),(0,r.yg)("p",null,"Currently the new modal supports the following databases:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Postgres"),(0,r.yg)("li",{parentName:"ul"},"Redshift"),(0,r.yg)("li",{parentName:"ul"},"MySQL"),(0,r.yg)("li",{parentName:"ul"},"BigQuery")),(0,r.yg)("p",null,"When the user selects a database not in this list they will see the old dialog asking for the SQLAlchemy URI. New databases can be added gradually to the new flow. In order to support the rich configuration a DB engine spec needs to have the following attributes:"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("inlineCode",{parentName:"li"},"parameters_schema"),": a Marshmallow schema defining the parameters needed to configure the database. For Postgres this includes username, password, host, port, etc. (",(0,r.yg)("a",{parentName:"li",href:"https://github.com/apache/superset/blob/accee507c0819cd0d7bcfb5a3e1199bc81eeebf2/superset/db_engine_specs/base.py#L1309-L1320"},"see"),")."),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("inlineCode",{parentName:"li"},"default_driver"),': the name of the recommended driver for the DB engine spec. Many SQLAlchemy dialects support multiple drivers, but usually one is the official recommendation. For Postgres we use "psycopg2".'),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("inlineCode",{parentName:"li"},"sqlalchemy_uri_placeholder"),": a string that helps the user in case they want to type the URI directly."),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("inlineCode",{parentName:"li"},"encryption_parameters"),": parameters used to build the URI when the user opts for an encrypted connection. For Postgres this is ",(0,r.yg)("inlineCode",{parentName:"li"},'{"sslmode": "require"}'),".")),(0,r.yg)("p",null,"In addition, the DB engine spec must implement these class methods:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"build_sqlalchemy_uri(cls, parameters, encrypted_extra)"),": this method receives the distinct parameters and builds the URI from them."),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"get_parameters_from_uri(cls, uri, encrypted_extra)"),": this method does the opposite, extracting the parameters from a given URI."),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"validate_parameters(cls, parameters)"),": this method is used for ",(0,r.yg)("inlineCode",{parentName:"li"},"onBlur")," validation of the form. It should return a list of ",(0,r.yg)("inlineCode",{parentName:"li"},"SupersetError")," indicating which parameters are missing, and which parameters are definitely incorrect (",(0,r.yg)("a",{parentName:"li",href:"https://github.com/apache/superset/blob/accee507c0819cd0d7bcfb5a3e1199bc81eeebf2/superset/db_engine_specs/base.py#L1404"},"example"),").")),(0,r.yg)("p",null,"For databases like MySQL and Postgres that use the standard format of ",(0,r.yg)("inlineCode",{parentName:"p"},"engine+driver://user:password@host:port/dbname")," all you need to do is add the ",(0,r.yg)("inlineCode",{parentName:"p"},"BasicParametersMixin")," to the DB engine spec, and then define the parameters 2-4 (",(0,r.yg)("inlineCode",{parentName:"p"},"parameters_schema")," is already present in the mixin)."),(0,r.yg)("p",null,"For other databases you need to implement these methods yourself. The BigQuery DB engine spec is a good example of how to do that."),(0,r.yg)("h3",{id:"extra-database-settings"},"Extra Database Settings"),(0,r.yg)("h5",{id:"deeper-sqlalchemy-integration"},"Deeper SQLAlchemy Integration"),(0,r.yg)("p",null,"It is possible to tweak the database connection information using the parameters exposed by\nSQLAlchemy. In the ",(0,r.yg)("strong",{parentName:"p"},"Database edit")," view, you can edit the ",(0,r.yg)("strong",{parentName:"p"},"Extra")," field as a JSON blob."),(0,r.yg)("p",null,"This JSON string contains extra configuration elements. The ",(0,r.yg)("inlineCode",{parentName:"p"},"engine_params")," object gets unpacked\ninto the ",(0,r.yg)("inlineCode",{parentName:"p"},"sqlalchemy.create_engine")," call, while the ",(0,r.yg)("inlineCode",{parentName:"p"},"metadata_params")," get unpacked into the\n",(0,r.yg)("inlineCode",{parentName:"p"},"sqlalchemy.MetaData")," call. Refer to the SQLAlchemy docs for more information."),(0,r.yg)("h5",{id:"schemas"},"Schemas"),(0,r.yg)("p",null,"Databases like Postgres and Redshift use the ",(0,r.yg)("strong",{parentName:"p"},"schema")," as the logical entity on top of the\n",(0,r.yg)("strong",{parentName:"p"},"database"),". For Superset to connect to a specific schema, you can set the ",(0,r.yg)("strong",{parentName:"p"},"schema")," parameter in\nthe ",(0,r.yg)("strong",{parentName:"p"},"Edit Tables")," form (Sources > Tables > Edit record)."),(0,r.yg)("h5",{id:"external-password-store-for-sqlalchemy-connections"},"External Password Store for SQLAlchemy Connections"),(0,r.yg)("p",null,"Superset can be configured to use an external store for database passwords. This is useful if you a\nrunning a custom secret distribution framework and do not wish to store secrets in Superset\u2019s meta\ndatabase."),(0,r.yg)("p",null,"Example: Write a function that takes a single argument of type ",(0,r.yg)("inlineCode",{parentName:"p"},"sqla.engine.url")," and returns the\npassword for the given connection string. Then set ",(0,r.yg)("inlineCode",{parentName:"p"},"SQLALCHEMY_CUSTOM_PASSWORD_STORE")," in your config\nfile to point to that function."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-python"},"def example_lookup_password(url):\n    secret = <<get password from external framework>>\n    return 'secret'\n\nSQLALCHEMY_CUSTOM_PASSWORD_STORE = example_lookup_password\n")),(0,r.yg)("p",null,"A common pattern is to use environment variables to make secrets available.\n",(0,r.yg)("inlineCode",{parentName:"p"},"SQLALCHEMY_CUSTOM_PASSWORD_STORE")," can also be used for that purpose."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-python"},"def example_password_as_env_var(url):\n    # assuming the uri looks like\n    # mysql://localhost?superset_user:{SUPERSET_PASSWORD}\n    return url.password.format(**os.environ)\n\nSQLALCHEMY_CUSTOM_PASSWORD_STORE = example_password_as_env_var\n")),(0,r.yg)("h5",{id:"ssl-access-to-databases"},"SSL Access to Databases"),(0,r.yg)("p",null,"You can use the ",(0,r.yg)("inlineCode",{parentName:"p"},"Extra")," field in the ",(0,r.yg)("strong",{parentName:"p"},"Edit Databases")," form to configure SSL:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-JSON"},'{\n    "metadata_params": {},\n    "engine_params": {\n          "connect_args":{\n              "sslmode":"require",\n              "sslrootcert": "/path/to/my/pem"\n        }\n     }\n}\n')),(0,r.yg)("h2",{id:"misc"},"Misc."),(0,r.yg)("h3",{id:"querying-across-databases"},"Querying across databases"),(0,r.yg)("p",null,'Superset offers an experimental feature for querying across different databases. This is done via a special database called "Superset meta database" that uses the "superset://" SQLAlchemy URI. When using the database it\'s possible to query any table in any of the configured databases using the following syntax:'),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'SELECT * FROM "database name.[[catalog.].schema].table name";\n')),(0,r.yg)("p",null,"For example:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'SELECT * FROM "examples.birth_names";\n')),(0,r.yg)("p",null,"Spaces are allowed, but periods in the names must be replaced by ",(0,r.yg)("inlineCode",{parentName:"p"},"%2E"),". Eg:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'SELECT * FROM "Superset meta database.examples%2Ebirth_names";\n')),(0,r.yg)("p",null,"The query above returns the same rows as ",(0,r.yg)("inlineCode",{parentName:"p"},'SELECT * FROM "examples.birth_names"'),", and also shows that the meta database can query tables from any table \u2014 even itself!"),(0,r.yg)("h4",{id:"considerations"},"Considerations"),(0,r.yg)("p",null,"Before enabling this feature, there are a few considerations that you should have in mind. First, the meta database enforces permissions on the queried tables, so users should only have access via the database to tables that they originally have access to. Nevertheless, the meta database is a new surface for potential attacks, and bugs could allow users to see data they should not."),(0,r.yg)("p",null,"Second, there are performance considerations. The meta database will push any filtering, sorting, and limiting to the underlying databases, but any aggregations and joins will happen in memory in the process running the query. Because of this, it's recommended to run the database in async mode, so queries are executed in Celery workers, instead of the web workers. Additionally, it's possible to specify a hard limit on how many rows are returned from the underlying databases."),(0,r.yg)("h4",{id:"enabling-the-meta-database"},"Enabling the meta database"),(0,r.yg)("p",null,"To enable the Superset meta database, first you need to set the ",(0,r.yg)("inlineCode",{parentName:"p"},"ENABLE_SUPERSET_META_DB"),' feature flag to true. Then, add a new database of type "Superset meta database" with the SQLAlchemy URI "superset://".'),(0,r.yg)("p",null,"If you enable DML in the meta database users will be able to run DML queries on underlying databases ",(0,r.yg)("strong",{parentName:"p"},"as long as DML is also enabled in them"),". This allows users to run queries that move data across databases."),(0,r.yg)("p",null,"Second, you might want to change the value of ",(0,r.yg)("inlineCode",{parentName:"p"},"SUPERSET_META_DB_LIMIT"),". The default value is 1000, and defines how many are read from each database before any aggregations and joins are executed. You can also set this value ",(0,r.yg)("inlineCode",{parentName:"p"},"None")," if you only have small tables."),(0,r.yg)("p",null,'Additionally, you might want to restrict the databases to with the meta database has access to. This can be done in the database configuration, under "Advanced" -> "Other" -> "ENGINE PARAMETERS" and adding:'),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{"allowed_dbs":["Google Sheets","examples"]}\n')))}y.isMDXComponent=!0}}]);