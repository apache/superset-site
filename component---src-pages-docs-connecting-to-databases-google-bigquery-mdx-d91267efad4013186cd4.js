(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{"9BGn":function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return i})),n.d(t,"default",(function(){return p}));var a=n("k1TG"),r=n("8o2o"),o=(n("q1tI"),n("7ljp")),c=n("hhGP"),i=(n("qKvR"),{});void 0!==i&&i&&i===Object(i)&&Object.isExtensible(i)&&!i.hasOwnProperty("__filemeta")&&Object.defineProperty(i,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"src/pages/docs/Connecting to Databases/google-bigquery.mdx"}});var b={_frontmatter:i},l=c.a;function p(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)(l,Object(a.a)({},b,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"google-bigquery"},"Google BigQuery"),Object(o.b)("p",null,"The recommended connector library for BigQuery is\n",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/mxmzdlv/pybigquery"}),"pybigquery"),"."),Object(o.b)("h3",{id:"install-bigquery-driver"},"Install BigQuery Driver"),Object(o.b)("p",null,"Follow the steps ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/databases/dockeradddrivers"}),"here")," about how to\ninstall new database drivers when setting up Superset locally via docker-compose."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),'echo "pybigquery" >> ./docker/requirements-local.txt\n')),Object(o.b)("h3",{id:"connecting-to-bigquery"},"Connecting to BigQuery"),Object(o.b)("p",null,"When adding a new BigQuery connection in Superset, you'll need to add the GCP Service Account\ncredentials file (as a JSON)."),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Create your Service Account via the Google Cloud Platform control panel, provide it access to the\nappropriate BigQuery datasets, and download the JSON configuration file for the service account."),Object(o.b)("li",{parentName:"ol"},"In Superset, you can either upload that JSON or add the JSON blob in the following format (this should be the content of your credential JSON file):")),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),'{\n        "type": "service_account",\n        "project_id": "...",\n        "private_key_id": "...",\n        "private_key": "...",\n        "client_email": "...",\n        "client_id": "...",\n        "auth_uri": "...",\n        "token_uri": "...",\n        "auth_provider_x509_cert_url": "...",\n        "client_x509_cert_url": "..."\n    }\n')),Object(o.b)("p",null,Object(o.b)("img",{alt:"CleanShot 2021-10-22 at 04 18 11",src:"https://user-images.githubusercontent.com/52086618/138352958-a18ef9cb-8880-4ef1-88c1-452a9f1b8105.gif"})),Object(o.b)("ol",{start:3},Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Additionally, can connect via SQLAlchemy URI instead"),Object(o.b)("p",{parentName:"li"}," The connection string for BigQuery looks like:"),Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),"bigquery://{project_id}\n")),Object(o.b)("p",{parentName:"li"}," Go to the ",Object(o.b)("strong",{parentName:"p"},"Advanced")," tab, Add a JSON blob to the ",Object(o.b)("strong",{parentName:"p"},"Secure Extra")," field in the database configuration form with\nthe following format:"),Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),'{\n"credentials_info": <contents of credentials JSON file>\n}\n')),Object(o.b)("p",{parentName:"li"},"The resulting file should have this structure:"),Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),'{\n "credentials_info": {\n     "type": "service_account",\n     "project_id": "...",\n     "private_key_id": "...",\n     "private_key": "...",\n     "client_email": "...",\n     "client_id": "...",\n     "auth_uri": "...",\n     "token_uri": "...",\n     "auth_provider_x509_cert_url": "...",\n     "client_x509_cert_url": "..."\n     }\n }\n')))),Object(o.b)("p",null,"You should then be able to connect to your BigQuery datasets."),Object(o.b)("p",null,Object(o.b)("img",{alt:"CleanShot 2021-10-22 at 04 47 08",src:"https://user-images.githubusercontent.com/52086618/138354340-df57f477-d3e5-42d4-b032-d901c69d2213.gif"})),Object(o.b)("p",null,"To be able to upload CSV or Excel files to BigQuery in Superset, you'll need to also add the\n",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/pydata/pandas-gbq"}),"pandas_gbq")," library."))}void 0!==p&&p&&p===Object(p)&&Object.isExtensible(p)&&!p.hasOwnProperty("__filemeta")&&Object.defineProperty(p,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"src/pages/docs/Connecting to Databases/google-bigquery.mdx"}}),p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-docs-connecting-to-databases-google-bigquery-mdx-d91267efad4013186cd4.js.map